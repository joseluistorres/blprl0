(function(a,b){a.extend(_TMS,{presets:{zoomer:{reverseWay:!1,duration:"1000",interval:"1",blocksX:"1",blocksY:"1",easing:"",way:"lines",anim:"zoomer",k:1.8,crds:{bottom:0,right:0}},fadeThree:{reverseWay:!1,duration:"1000",interval:"1",blocksX:"1",blocksY:"1",easing:"",way:"lines",anim:"fadeThree"},simpleFade:{reverseWay:!1,duration:"1000",interval:"1",blocksX:"1",blocksY:"1",easing:"",way:"lines",anim:"fade"},gSlider:{reverseWay:!1,duration:400,interval:40,blocksX:"1",blocksY:"1",easing:"",way:"lines",anim:"gSlider"},vSlider:{reverseWay:!1,duration:400,interval:40,blocksX:"1",blocksY:"1",easing:"",way:"lines",anim:"vSlider"},slideFromLeft:{reverseWay:!1,duration:"1000",interval:"1",blocksX:"1",blocksY:"1",easing:"easeOutBack",way:"lines",anim:"slideFromLeft"},slideFromTop:{reverseWay:!1,duration:"1000",interval:"1",blocksX:"1",blocksY:"1",easing:"easeOutBack",way:"lines",anim:"slideFromTop"},diagonalFade:{reverseWay:!1,duration:400,interval:40,blocksX:12,blocksY:6,easing:"easeInQuad",way:"diagonal",anim:"fade"},diagonalExpand:{reverseWay:!1,duration:400,interval:40,blocksX:8,blocksY:4,easing:"easeInQuad",way:"diagonal",anim:"expand"},fadeFromCenter:{reverseWay:!0,duration:"600",interval:"10",blocksX:"10",blocksY:"6",easing:"",way:"spiral",anim:"fade"},zabor:{reverseWay:!1,duration:400,interval:40,blocksX:"20",blocksY:"1",easing:"",way:"lines",anim:"slideRight"},vertivalLines:{reverseWay:!1,duration:600,interval:1,blocksX:12,blocksY:1,easing:"swing",way:"lines",anim:"vSlideOdd"},gorizontalLines:{reverseWay:!1,duration:600,interval:1,blocksX:1,blocksY:12,easing:"swing",way:"lines",anim:"gSlideOdd"}},ways:{lines:function(){var a=this;for(var b=[],c=0;c<a.maskC.length;c++)b.push(a.maskC.eq(c));return b},spiral:function(){var a=this,b=[],c=0,d=a.blocksY,e=a.blocksX,f,g,h,i=function(){for(h=c;h<e-1-c;h++)if(b.length<a.maskC.length)b.push(a.matrix[c][h]);else return!1;j()},j=function(){for(h=c;h<d-1-c;h++)if(b.length<a.maskC.length)b.push(a.matrix[h][e-1-c]);else return!1;k()},k=function(){for(h=c;h<e-1-c;h++)if(b.length<a.maskC.length)b.push(a.matrix[d-1-c][e-h-1]);else return!1;l()},l=function(){for(h=c;h<d-1-c;h++)if(b.length<a.maskC.length)b.push(a.matrix[d-h-1][c]);else return!1;i(c++)};return i(),b},vSnake:function(){var a=this,b=[],c=a.blocksY,d=a.blocksX,e,f;for(f=0;f<d;f++)for(e=0;e<c;e++)f*.5==~~(f/2)?b.push(a.matrix[e][f]):b.push(a.matrix[c-1-e][f]);return b},gSnake:function(){var a=this,b=[],c=a.blocksY,d=a.blocksX,e,f;for(f=0;f<c;f++)for(e=0;e<d;e++)f*.5==~~(f/2)?b.push(a.matrix[f][e]):b.push(a.matrix[f][d-1-e]);return b},diagonal:function(){var a=this,b=[],c=a.blocksY,d=a.blocksX,e=j=n=0;for(e=0;e<d;e++)for(b[e]=[],j=0;j<=e;j++)j<c&&b[e].push(a.matrix[j][e-j]);for(e=1;e<c;e++)for(j=0,b[n=b.length]=[];j<c-e;j++)b[n].push(a.matrix[e+j][d-1-j]);return b},chess:function(){var a=this;for(var b=0,c=[[],[]],d=0;b<a.maskC.length;b++)c[d=d?0:1].push(a.maskC.eq(b));return c},randomly:function(){var a=this;for(var b=[],c=i=0;i<a.maskC.length;i++)b.push(a.maskC.eq(i));for(i=0;i<a.maskC.length;i++)b.push(b.splice(parseInt(Math.random()*a.maskC.length-1),1)[0]);return b}},anims:{fadeThree:function(b,c){var d=this;a(b).each(function(b){var e=a(this).show().css({left:-d.width/4,top:0,zIndex:2}),f=e.clone().appendTo(e.parent()).css({left:d.width/4,top:d.height/4,zIndex:1}),g=e.clone().appendTo(e.parent()).css({left:0,top:-d.height/4,zIndex:1});f.stop().animate({left:0,top:0},{duration:d.duration,easing:d.easing}),g.stop().animate({left:0,top:0},{duration:d.duration,easing:d.easing}),e.stop().animate({left:0,top:0},{duration:d.duration,easing:d.easing,step:function(a){var b=a/d.width,c=1+b;f.css({opacity:c*c}),g.css({opacity:c*c}),e.css({opacity:c*c*c})},complete:function(){c&&d.afterShow(),f.remove(),g.remove()}})})},zoomer:function(b,c){var d=this;a(b).each(function(){var b=a(this),e=a(new Image),f=d.direction>0?d.width*d.k:d.width,g=d.direction>0?d.width:d.width*d.k;console.log(f+" "+g),e.css({position:"absolute",zIndex:0,opacity:0}).css(d.crds).appendTo(d.pic).load(function(){d.pic.find("img").not(e).remove(),e.css({width:f,height:"auto"}).stop().animate({opacity:1},{duration:200}).animate({width:g},{duration:d.duration,easing:d.easing}),setTimeout(function(){c&&d.afterShow()},400)}).attr({src:d.next})})},fade:function(b,c){var d=this;a(b).each(function(){a(this).css({opacity:0}).show().stop().animate({opacity:1},{duration:+d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}})})},expand:function(b,c){var d=this;a(b).each(function(){a(this).hide().show(+d.duration,function(){c&&d.afterShow()})})},slideDown:function(b,c){var d=this;a(b).each(function(){var b=a(this).show(),e=b.height();b.css({height:0}).stop().animate({height:e},{duration:d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}})})},slideLeft:function(b,c){var d=this;a(b).each(function(){var b=a(this).show(),e=b.width();b.css({width:0}).stop().animate({width:e},{duration:d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}})})},slideUp:function(b,c){var d=this;a(b).each(function(){var b=a(this).show(),e=b.height(),f=b.attr("offsetLeft"),g=b.attr("offsetTop");b.css({height:0,top:g+e}).stop().animate({height:e},{duration:d.duration,easing:d.easing,step:function(a){var c=g+e-a;b.css({top:c,backgroundPosition:"-"+f+"px -"+c+"px"})},complete:function(){c&&d.afterShow()}})})},slideRight:function(b,c){var d=this;a(b).each(function(){var b=a(this).show(),e=b.width(),f=b.attr("offsetLeft"),g=b.attr("offsetTop");b.css({width:0,left:f+e}).stop().animate({width:e},{duration:d.duration,easing:d.easing,step:function(a){var c=f+e-a;b.css({left:c,backgroundPosition:"-"+c+"px -"+g+"px"})},complete:function(){c&&d.afterShow()}})})},slideFromTop:function(b,c){var d=this;a(b).each(function(){var b=a(this),e=b.show().css("top"),f=b.height();b.css({top:-f}).stop().animate({top:e},{duration:+d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}})})},slideFromDown:function(b,c){var d=this;a(b).each(function(){var b=a(this),e=b.show().css("top"),f=b.height();b.css({top:f}).stop().animate({top:e},{duration:+d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}})})},slideFromLeft:function(b,c){var d=this;a(b).each(function(){var b=a(this),e=b.show().css("left"),f=b.width();b.css({left:-f}).stop().animate({left:e},{duration:+d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}})})},slideFromRight:function(b,c){var d=this;a(b).each(function(){var b=a(this),e=b.show().css("left"),f=b.width();b.css({left:f}).stop().animate({left:e},{duration:+d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}})})},gSlider:function(a,b){var c=this,d=c.maskC.clone(),e=d.width();d.appendTo(c.maskC.parent()).css({background:c.pic.css("backgroundImage")}).show(),a.show().css({left:c.direction>0?-e:e}).stop().animate({left:0},{duration:+c.duration,easing:c.easing,step:function(a){c.direction>0?d.css("left",a+e):d.css("left",a-e)},complete:function(){d.remove(),b&&c.afterShow()}})},vSlider:function(a,b){var c=this,d=c.maskC.clone(),e=d.height();d.appendTo(c.maskC.parent()).css({background:c.pic.css("backgroundImage")}).show(),a.show().css({top:c.direction>0?-e:e}).stop().animate({top:0},{duration:+c.duration,easing:c.easing,step:function(a){c.direction>0?d.css("top",a+e):d.css("top",a-e)},complete:function(){d.remove(),b&&c.afterShow()}})},vSlideOdd:function(b,c){var d=this;a(b).each(function(){var b=a(this),e=b.show().css("top"),f=b.height(),g=d.odd;b.css({top:g?-f:f}).stop().animate({top:e},{duration:+d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}}),d.odd=d.odd?!1:!0})},gSlideOdd:function(b,c){var d=this;a(b).each(function(){var b=a(this),e=b.show().css("left"),f=b.width(),g=d.odd;b.css({left:g?-f:f}).stop().animate({left:e},{duration:+d.duration,easing:d.easing,complete:function(){c&&d.afterShow()}}),d.odd=d.odd?!1:!0})}}})})(jQuery)